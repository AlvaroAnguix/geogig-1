<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, maximum-scale=1">
  
  <title>Serving and Managing Repositories &mdash; GeoGig 1.0 User Manual</title>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,800italic,300,700,600,800,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Cantarell:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="../_static/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="../_static/print.css" type="text/css" media="print" />
  <!--[if IE]>
  <link rel="stylesheet" href="../_static/blueprint/ie.css" type="text/css" media="screen, projection" />
  <![endif]-->
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
   <link rel="stylesheet" href="../_static/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/offcanvas.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html'
    };
  </script>
      <link rel="top" title="GeoGig 1.0 User Manual" href="../index.html" />
      <link rel="up" title="Other ways to interact with GeoGig" href="index.html" />
      <link rel="next" title="GeoServer GUI Configuration" href="geoserver_ui.html" />
      <link rel="prev" title="GeoGig Networking" href="networking.html" />
</head>
<body class="interaction/web-repository-management">
    <div id="blacktop"></div>
    <header id="masthead">
      <div class="navbar">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://geogig.org"><h1>GeoGig</h1></a>
          </div>
          <div class="navbar-collapse collapse navbar-right">
            <ul class="nav navbar-nav">
              <li><a href="http://geogig.org/#install">Get Started</a></li>
              <li><a href="http://geogig.org/docs/index.html">Documentation</a></li>
              <li><a href="https://github.com/locationtech/geogig">On Github</a></li>
            </ul>
          </div><!--/.navbar-collapse -->
        </div>
      </div>
    </header>

    <section class="subheading hidden-xs">
      <div class="container">
        <div class="row">
          <div class="col-md-8">
            <p class="byline">A Tool for Geospatial Data Management</p>
          </div>
        </div>
      </div>
    </section>
    <a name="top"></a>

 <div id="main">
    <div class="wrap selfclear">
      <div id="content">
      <div class="container">
        <div class="row row-offcanvas row-offcanvas-right">
          <div class="col-md-8">
            <div class="row pull-right">
             <div class="visible-sm visible-xs" id="menu-btn">
                <button class="btn btn-blue btn-sm"type="button" data-toggle="offcanvas">
                  <span class="btn-text active">Menu &rarr;</span>
                  <span class="btn-back">&larr; Back</span>
                </button>
              </div>
            </div>
<ul id="breadcrumbs">
  
  <li><a href="../index.html">GeoGig 1.0 User Manual</a> &raquo;</li>
  <li><a href="index.html" accesskey="U">Other ways to interact with GeoGig</a> &raquo;</li>
  <li>Serving and Managing Repositories</li>
</ul>
<ul id="relatedlinks" class="selfclear">
  <li class="first">
    <a href="../genindex.html" title="General Index"
       accesskey="I">index</a></li>
  <li>
    <a href="geoserver_ui.html" title="GeoServer GUI Configuration"
       accesskey="N">next</a>|</li>
  <li>
    <a href="networking.html" title="GeoGig Networking"
       accesskey="P">previous</a>|</li>
</ul>
        
  <div class="section" id="serving-and-managing-repositories">
<span id="web-repository-management"></span><h1>Serving and Managing Repositories<a class="headerlink" href="#serving-and-managing-repositories" title="Permalink to this headline">¶</a></h1>
<p>The GeoGig Web-API allows you to serve up multiple repositories from a single endpoint via the <code class="docutils literal"><span class="pre">geogig</span> <span class="pre">serve</span></code> command.  The Web-Api documentation goes over using this command to serve a single repository, but this section will discuss using the command to serve and manage multiple repositories.</p>
<div class="section" id="serving-multiple-repositories">
<h2>Serving Multiple Repositories<a class="headerlink" href="#serving-multiple-repositories" title="Permalink to this headline">¶</a></h2>
<p>When <code class="docutils literal"><span class="pre">geogig</span> <span class="pre">serve</span></code> is run from within a geogig repository directory, it will serve only that repository.  However, if it is run from a directory containing zero or more GeoGig repositories while using the <code class="docutils literal"><span class="pre">--multirepo</span></code> parameter, all repositories within that directory will be served through the endpoint.</p>
<p>Given the following directory structure:</p>
<div class="highlight-python"><div class="highlight"><pre>/repos/
  repo1/
    .geogig/
  repo2/
    .geogig/
  repo3/
    .geogig/
</pre></div>
</div>
<p>To serve repo1, repo2, and repo3 under a single endpoint, perform the following commands:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd /repos
$ geogig serve --multirepo
</pre></div>
</div>
<p>This will enable all three repositories to be accessed through the <code class="docutils literal"><span class="pre">http://localhost:8182/repos</span></code> endpoint.</p>
<p>The rest of this document will use this repository configuration for demonstration purposes.</p>
</div>
<div class="section" id="repository-management">
<h2>Repository Management<a class="headerlink" href="#repository-management" title="Permalink to this headline">¶</a></h2>
<div class="section" id="listing-repositories">
<h3>Listing Repositories<a class="headerlink" href="#listing-repositories" title="Permalink to this headline">¶</a></h3>
<p>In order to see which repositories are currently being served, you can issue a <code class="docutils literal"><span class="pre">GET</span></code> request against the <code class="docutils literal"><span class="pre">repos/</span></code> endpoint.  The response will also provide a link to each individual repository&#8217;s endpoint.</p>
<div class="highlight-python"><div class="highlight"><pre>$ curl -v &quot;http://localhost:8182/repos/&quot; | xmllint --format - --format -
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;repos&gt;
  &lt;repo&gt;
    &lt;name&gt;repo2&lt;/name&gt;
    &lt;atom:link xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot; rel=&quot;alternate&quot; href=&quot;http://localhost:8182/repos/repo2.xml&quot; type=&quot;application/xml&quot;/&gt;
  &lt;/repo&gt;
  &lt;repo&gt;
    &lt;name&gt;repo3&lt;/name&gt;
    &lt;atom:link xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot; rel=&quot;alternate&quot; href=&quot;http://localhost:8182/repos/repo3.xml&quot; type=&quot;application/xml&quot;/&gt;
  &lt;/repo&gt;
  &lt;repo&gt;
    &lt;name&gt;repo1&lt;/name&gt;
    &lt;atom:link xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot; rel=&quot;alternate&quot; href=&quot;http://localhost:8182/repos/repo1.xml&quot; type=&quot;application/xml&quot;/&gt;
  &lt;/repo&gt;
&lt;/repos&gt;
</pre></div>
</div>
</div>
<div class="section" id="creating-new-repositories">
<h3>Creating New Repositories<a class="headerlink" href="#creating-new-repositories" title="Permalink to this headline">¶</a></h3>
<p>You can create a new repository by issuing a <code class="docutils literal"><span class="pre">PUT</span></code> request to the <code class="docutils literal"><span class="pre">init</span></code> endpoint of the desired repository.  The name preceding <code class="docutils literal"><span class="pre">init</span></code> will be used as the repository name.</p>
<div class="highlight-python"><div class="highlight"><pre>$ curl -X PUT -v &quot;http://localhost:8182/repos/repo4/init&quot; | xmllint --format -
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;response&gt;
  &lt;success&gt;true&lt;/success&gt;
  &lt;repo&gt;
    &lt;name&gt;repo4&lt;/name&gt;
    &lt;atom:link xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot; rel=&quot;alternate&quot; href=&quot;http://localhost:8182/repos/repo4.xml&quot; type=&quot;application/xml&quot;/&gt;
  &lt;/repo&gt;
&lt;/response&gt;
</pre></div>
</div>
<p>Behind the scenes, a new repository will be created and configured with <code class="docutils literal"><span class="pre">repo4</span></code> as the name.  The actual directory that is created for the repository will be randomized to avoid naming conflicts with other repositories.  This is important because repository management allows you to rename repositories.</p>
</div>
<div class="section" id="renaming-repositories">
<h3>Renaming Repositories<a class="headerlink" href="#renaming-repositories" title="Permalink to this headline">¶</a></h3>
<p>If you wish to change the name of a repository after it has been created, you can do so by issuing a <code class="docutils literal"><span class="pre">POST</span></code> request to the <code class="docutils literal"><span class="pre">rename</span></code> endpoint of the repository with the new name.  Because the repository&#8217;s name is used in web-api calls, renaming a repository will cause the endpoint for that repository to change to the new name.</p>
<div class="highlight-python"><div class="highlight"><pre>$ curl -X POST -v &quot;http://localhost:8182/repos/repo4/rename?name=betterName&quot; | xmllint --format -
&lt; HTTP/1.1 301 Moved Permanently
&lt; Content-Type: application/xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;response&gt;
  &lt;success&gt;true&lt;/success&gt;
  &lt;repo&gt;
    &lt;name&gt;betterName&lt;/name&gt;
    &lt;atom:link xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot; rel=&quot;alternate&quot; href=&quot;http://localhost:8182/repos/betterName.xml&quot; type=&quot;application/xml&quot;/&gt;
  &lt;/repo&gt;
&lt;/response&gt;
</pre></div>
</div>
<p>The repository can now be accessed via the <code class="docutils literal"><span class="pre">http://localhost:8182/repos/betterName/</span></code> endpoint.</p>
</div>
<div class="section" id="deleting-repositories">
<h3>Deleting Repositories<a class="headerlink" href="#deleting-repositories" title="Permalink to this headline">¶</a></h3>
<p>If a repository is no longer needed, you may wish to delete it.  You may do this by performing a two-step delete operation on the repository.  It is set up this way in order to prevent any accidental deletions.  The first step to delete a repository is to issue a <code class="docutils literal"><span class="pre">GET</span></code> request to the <code class="docutils literal"><span class="pre">delete</span></code> endpoint of the repository.  This will return a token that can be used to delete the repository in step two.</p>
<div class="highlight-python"><div class="highlight"><pre>  $ curl -v &quot;http://localhost:8182/repos/betterName/delete&quot; | xmllint --format -
  &lt; HTTP/1.1 200 OK
  &lt; Content-Type: application/xml
  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
  &lt;response&gt;
    &lt;success&gt;true&lt;/success&gt;
&lt;token&gt;db431217519a4c72&lt;/token&gt;
  &lt;/response&gt;
</pre></div>
</div>
<p>Now that we have the delete token, we can issue a <code class="docutils literal"><span class="pre">DELETE</span></code> request to the repository endpoint.</p>
<div class="highlight-python"><div class="highlight"><pre>$ curl -X DELTE -v &quot;http://localhost:8182/repos/betterName?token=db431217519a4c72&quot; | xmllint --format -
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;deleted&gt;betterName&lt;/deleted&gt;
</pre></div>
</div>
<p>The repository has now been deleted.</p>
</div>
</div>
<div class="section" id="asynchronous-requests">
<h2>Asynchronous Requests<a class="headerlink" href="#asynchronous-requests" title="Permalink to this headline">¶</a></h2>
<p>Just like when serving a single repository, asynchronous web-api tasks can be polled via the <code class="docutils literal"><span class="pre">tasks</span></code> endpoint.  All repositories share the same tasks endpoint.</p>
<div class="highlight-python"><div class="highlight"><pre>$ curl -v &quot;http://localhost:8182/tasks&quot; | xmllint --format -
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/xml
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;tasks/&gt;
</pre></div>
</div>
<p>In this example, no asynchronous tasks have been run, but if they had been, they would be listed here with their corresponding task id.</p>
</div>
</div>


      <div class="selfclear pagination-nav">
          <div class="leftwise"><strong>Previous</strong>: <a href="networking.html" title="previous chapter">GeoGig Networking</a></div>
          <div class="rightwise"><strong>Next</strong>: <a href="geoserver_ui.html" title="next chapter">GeoServer GUI Configuration</a></div>
      </div>
      <p class="centered-text"><a href="#top"><img src="../_static/arrow_up.png" alt="back to top"/></a></p>
      </div><!-- /#content> -->
  <div id="sidebar" class="sidebar-offcanvas contrast col-sm-4 sidebar-offcanvas" id="sidebar" role="navigation">

    <div>
         <form id="quick-search" action="search.html" method="get" style="width: 100%;">
          <fieldset>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
            <input id="quick-search-query" type="text" name="q" accessKey="q" name="searchQuery.queryString" size="25" value="Search Documentation&hellip;" size="20" tabindex="3" onblur="if(this.value=='') this.value='Search Documentation&hellip;';" onfocus="if(this.value=='Search Documentation&hellip;') this.value='';" />
          </fieldset>
        </form>


        <div class="btn-group-vertical" id="docs_toc">
          <button type="button" class="btn btn-default"><a href="/docs/">User Manual</a></button>
          <button type="button" class="btn btn-default"><a href="/technical/">Technical Manual</a></button>
          <button type="button" class="btn btn-default"><a href="/manpages/">Man Pages</a></button>
          <button type="button" class="btn btn-default"><a href="/workshop/">Workshop</a></button>
      </div>
      <h3 class="pngfix">Table Of Contents</h3>
        <ul>
<li><a class="reference internal" href="#">Serving and Managing Repositories</a><ul>
<li><a class="reference internal" href="#serving-multiple-repositories">Serving Multiple Repositories</a></li>
<li><a class="reference internal" href="#repository-management">Repository Management</a><ul>
<li><a class="reference internal" href="#listing-repositories">Listing Repositories</a></li>
<li><a class="reference internal" href="#creating-new-repositories">Creating New Repositories</a></li>
<li><a class="reference internal" href="#renaming-repositories">Renaming Repositories</a></li>
<li><a class="reference internal" href="#deleting-repositories">Deleting Repositories</a></li>
</ul>
</li>
<li><a class="reference internal" href="#asynchronous-requests">Asynchronous Requests</a></li>
</ul>
</li>
</ul>

        <div class="section-footer"></div>
      </div>
        <div class="section continue_reading">
          <h3>Continue Reading</h3>
          <ul>
            <li>Previous: <a href="networking.html" title="previous chapter">GeoGig Networking</a></li>
            <li>Next: <a href="geoserver_ui.html" title="next chapter">GeoServer GUI Configuration</a></li>
          </ul>
        </div>
        <div class="section">
        <h3>This Page</h3>
        <ul class="this-page-menu">
          <li><a href="../_sources/interaction/web-repository-management.txt">Show Source</a></li>
        </ul>
        </div>
        <div class="section">
          <h3>License</h3>
          <p>This project is licensed under the <a href="https://github.com/locationtech/geogig/blob/master/LICENSE.txt">Eclipse License</a>.</p>
        </div>

  </div><!-- /#sidebar -->
  </div><!-- /.wrap> -->
</div>
</div>

</div><!-- /#main -->
    <footer>
      <div class="container">
        <div class="row">
          <div class=""><p class="repo-owner"><a href="https://github.com/locationtech/geogig">GeoGig</a> is maintained by <a href="https://github.com/boundlessgeo"><img src="../_static/Boundless_Logo.png" alt="Boundless"></a></p></div>
        </div>
      </div>
    </footer>


  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/jquery-migrate-min.js"></script>
  <script type="text/javascript" src="../_static/bootstrap.js" ></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>
  <script type="text/javascript" src="../_static/searchtools.js"></script>
  <script type="text/javascript" src="../searchindex.js"></script>
  <script>
      $(document).ready(function() {

      $('[data-toggle=offcanvas]').click(function(e) {
        e.stopPropagation();
        $('.row-offcanvas').toggleClass('active');
        $('.btn-back').toggleClass('active');
        $('.btn-text').toggleClass('active');
      });
      $('.list-group-item').click(function(e) {
        e.stopPropagation();
        $('.row-offcanvas').toggleClass('active');
        $('.btn-back').toggleClass('active');
        $('.btn-text').toggleClass('active');
      });
    });
  </script>
  <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-3879903-19']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
  </script>
  </body>
</html>
